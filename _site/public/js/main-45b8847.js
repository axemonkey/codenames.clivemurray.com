(()=>{var f=(t,e,n)=>{let o=new XMLHttpRequest;o.onreadystatechange=()=>{o.readyState===4&&o.status===200&&e(t,o.responseText,n)},o.open("GET","/public/data/".concat(t,".json"),!0),o.send()};var $={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#ddd",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spin",zIndex:2e9,top:"auto",left:"auto"},b=$;var S=t=>t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase(),y=t=>{let e,n=new URLSearchParams(document.location.search);return n.get(t)&&(e=decodeURIComponent(n.get(t))),e};var d={assets:{prefixes:[],animals:[]}},v=()=>{let t=["prefixes","animals"],e={},n=!0;for(let o of t)e[o]=y(o),(!e[o]||e[o].length===0)&&(n=!1);if(n)for(let o of t){let s=e[o].split(","),r=[];for(let c of s)for(let l of d.assets[o])l.attributes.includes(c)&&(r.includes(l)||r.push(l));d.assets[o]=r}w()},m=(t,e)=>{let n=d.assets[t],o=n[Math.floor(Math.random()*n.length)];document.querySelector(".".concat(e)).textContent=S(o.title)},L=()=>{m("prefixes","prefix"),m("animals","animal"),k(0,30)},k=(t,e)=>{Math.round(Math.random())<.5?m("prefixes","prefix"):m("animals","animal");let n=t+1;n<e&&window.setTimeout(()=>{k(n,e)},n*3)},w=()=>{var t=document.querySelector(".spinner");t.remove(),L()},g=(t,e,n)=>{d.assets[t]=JSON.parse(e),d.assets.prefixes.length>0&&d.assets.animals.length>0&&n()},C=t=>{let e=d.assets[t],n=[];for(let o of e)for(let s of o.attributes)n.indexOf(s)===-1&&n.push(s);return n.sort(),console.log("attributes found for ".concat(t,":")),console.log(n),n},x=()=>{let t=["prefixes","animals"],e=!0;for(let o of t){let s=document.querySelector("#".concat(o)),r=s.querySelector(".buttonContainer"),c=[],l=s.querySelectorAll("input:checked");for(let i of l)for(let u of d.assets[o])u.attributes.includes(i.value)&&(c.includes(u)||c.push(u));for(c.length===0&&(e=!1);s.querySelector(".countHolder");)s.querySelector(".countHolder").remove();let a=document.createElement("div");a.classList.add("countHolder"),a.textContent="".concat(c.length," ").concat(o," matched"),s.insertBefore(a,r),console.log("matched: ".concat(c.map(i=>i.title)))}let n=document.querySelector("#go");n.disabled=!e},E=(t,e)=>{let o=t.closest("fieldset").querySelectorAll("input");for(let s of o)s.checked=e;x()},q=()=>{let t=[{name:"prefixes"},{name:"animals"}];for(let e of t){e.attributes=C(e.name);let n=y(e.name),o=n?n.split(","):void 0,s=document.querySelector("fieldset#".concat(e.name));for(let a of e.attributes){let i=document.createElement("input"),u="cb-".concat(e.name,"-").concat(a);i.type="checkbox",i.name=u,i.id=u,i.value=a,(o===void 0||o.includes(a))&&(i.checked="checked"),i.addEventListener("change",()=>{x()});let h=document.createElement("label");h.setAttribute("for",u),h.textContent=a;let p=document.createElement("div");p.classList.add("attribute"),p.append(i),p.append(h),s.append(p)}let r=document.createElement("button");r.textContent="All",r.id="all-".concat(e.name),r.addEventListener("click",a=>{E(a.target,!0)});let c=document.createElement("button");c.textContent="None",c.id="none-".concat(e.name),c.addEventListener("click",a=>{E(a.target,!1)});let l=document.createElement("div");l.classList.add("buttonContainer"),l.append(r,c),s.append(l)}x()},A=()=>{console.log("go");let t=["prefixes","animals"],e=[];for(let n of t){let o=[],r=document.querySelector("fieldset#".concat(n)).querySelectorAll("input:checked");for(let c of r)o.push(c.value);e.push("".concat(n,"=").concat(o.join(",")))}document.location.href="/?".concat(e.join("&"))},O=()=>{console.log("setupOptions"),f("prefixes",g,q),f("animals",g,q),document.querySelector("#go").addEventListener("click",()=>{A()})},P=()=>{let t=document.createElement("div"),e=document.querySelector("h1");t.classList.add("spinner"),e.after(t),new Spinner(b).spin(t),document.querySelector(".another").addEventListener("click",()=>{L()}),document.querySelector(".prefix").addEventListener("click",()=>{m("prefixes","prefix")}),document.querySelector(".animal").addEventListener("click",()=>{m("animals","animal")}),f("prefixes",g,v),f("animals",g,v)},M=()=>{document.documentElement.classList.add("js"),document.querySelector("#menu-trigger").addEventListener("click",t=>{t.target.closest("nav").classList.toggle("open")}),document.querySelector("#nav-options").addEventListener("click",t=>{t.preventDefault();let e=document.location.search;document.location.href="/options/".concat(e)}),document.querySelector("main.namer")&&P(),document.querySelector("main.options")&&O()};window.addEventListener("load",M);})();
//# sourceMappingURL=main-45b8847.js.map */
