(()=>{var f=(t,e,n)=>{let o=new XMLHttpRequest;o.onreadystatechange=()=>{o.readyState===4&&o.status===200&&e(t,o.responseText,n)},o.open("GET","/public/data/".concat(t,".json"),!0),o.send()};var $={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#ddd",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spin",zIndex:2e9,top:"auto",left:"auto"},L=$;var y=t=>t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase(),x=t=>{let e,n=new URLSearchParams(document.location.search);return n.get(t)&&(e=decodeURIComponent(n.get(t))),e};var u={assets:{prefixes:[],animals:[]}},b=()=>{let t=["prefixes","animals"],e={},n=!0;for(let s of t)e[s]=x(s),(!e[s]||e[s].length===0)&&(n=!1);let o=document.querySelector(".currentFilters");if(o.classList.add("hide"),n){let s=document.createElement("div");s.classList.add("currentFiltersList");let i="<ul>";for(let c of t){let d=e[c].split(","),r=[];for(let a of d)for(let l of u.assets[c])l.attributes.includes(a)&&(r.includes(l)||r.push(l));u.assets[c]=r,i+="<li>".concat(y(c),": ").concat(d.join(", "),"</li>")}i+="</ul>",s.innerHTML=i,o.querySelector("details").append(s),o.classList.remove("hide")}w()},m=(t,e)=>{let n=u.assets[t],o=n[Math.floor(Math.random()*n.length)];document.querySelector(".".concat(e)).textContent=y(o.title)},q=()=>{m("prefixes","prefix"),m("animals","animal"),k(0,30)},k=(t,e)=>{Math.round(Math.random())<.5?m("prefixes","prefix"):m("animals","animal");let n=t+1;n<e&&window.setTimeout(()=>{k(n,e)},n*3)},w=()=>{var t=document.querySelector(".spinner");t.remove(),q()},g=(t,e,n)=>{u.assets[t]=JSON.parse(e),u.assets.prefixes.length>0&&u.assets.animals.length>0&&n()},C=t=>{let e=u.assets[t],n=[];for(let o of e)for(let s of o.attributes)n.indexOf(s)===-1&&n.push(s);return n.sort(),console.log("attributes found for ".concat(t,":")),console.log(n),n},S=()=>{let t=["prefixes","animals"],e=!0;for(let o of t){let s=document.querySelector("#".concat(o)),i=s.querySelector(".buttonContainer"),c=[],d=s.querySelectorAll("input:checked");for(let a of d)for(let l of u.assets[o])l.attributes.includes(a.value)&&(c.includes(l)||c.push(l));for(c.length===0&&(e=!1);s.querySelector(".countHolder");)s.querySelector(".countHolder").remove();let r=document.createElement("div");r.classList.add("countHolder"),r.textContent="".concat(c.length," ").concat(o," matched"),s.insertBefore(r,i),console.log("matched: ".concat(c.map(a=>a.title)))}let n=document.querySelector("#go");n.disabled=!e},v=(t,e)=>{let o=t.closest("fieldset").querySelectorAll("input");for(let s of o)s.checked=e;S()},E=()=>{let t=[{name:"prefixes"},{name:"animals"}];for(let e of t){e.attributes=C(e.name);let n=x(e.name),o=n?n.split(","):void 0,s=document.querySelector("fieldset#".concat(e.name));for(let r of e.attributes){let a=document.createElement("input"),l="cb-".concat(e.name,"-").concat(r);a.type="checkbox",a.name=l,a.id=l,a.value=r,(o===void 0||o.includes(r))&&(a.checked="checked"),a.addEventListener("change",()=>{S()});let h=document.createElement("label");h.setAttribute("for",l),h.textContent=r;let p=document.createElement("div");p.classList.add("attribute"),p.append(a),p.append(h),s.append(p)}let i=document.createElement("button");i.textContent="All",i.id="all-".concat(e.name),i.addEventListener("click",r=>{v(r.target,!0)});let c=document.createElement("button");c.textContent="None",c.id="none-".concat(e.name),c.addEventListener("click",r=>{v(r.target,!1)});let d=document.createElement("div");d.classList.add("buttonContainer"),d.append(i,c),s.append(d)}S()},A=()=>{console.log("go");let t=["prefixes","animals"],e=[];for(let n of t){let o=[],i=document.querySelector("fieldset#".concat(n)).querySelectorAll("input:checked");for(let c of i)o.push(c.value);e.push("".concat(n,"=").concat(o.join(",")))}document.location.href="/?".concat(e.join("&"))},O=()=>{console.log("setupOptions"),f("prefixes",g,E),f("animals",g,E),document.querySelector("#go").addEventListener("click",()=>{A()})},P=()=>{let t=document.createElement("div"),e=document.querySelector("h1");t.classList.add("spinner"),e.after(t),new Spinner(L).spin(t),document.querySelector(".another").addEventListener("click",()=>{q()}),document.querySelector(".prefix").addEventListener("click",()=>{m("prefixes","prefix")}),document.querySelector(".animal").addEventListener("click",()=>{m("animals","animal")}),f("prefixes",g,b),f("animals",g,b)},M=()=>{document.documentElement.classList.add("js"),document.querySelector("#menu-trigger").addEventListener("click",t=>{t.target.closest("nav").classList.toggle("open")}),document.querySelector("#nav-options").addEventListener("click",t=>{t.preventDefault();let e=document.location.search;document.location.href="/options/".concat(e)}),document.querySelector("main.namer")&&P(),document.querySelector("main.options")&&O()};window.addEventListener("load",M);})();
//# sourceMappingURL=main-69c09bf.js.map */
